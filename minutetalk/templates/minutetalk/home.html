<!DOCTYPE html>
<html>

<head>
    <title>MinuteTalk</title>
    <link href='https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons' rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Catamaran:100,200,300,400,500,600,700,800,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
    <link href="https://unpkg.com/vuetify/dist/vuetify.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Muli" rel="stylesheet">
    <link href="../../static/minutetalk/css/stream.css" rel="stylesheet" type="text/css">
    <link href="../../static/minutetalk/css/style.css" rel="stylesheet" type="text/css">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    {% load static %}
</head>

<body>
    <div id="home">
        <v-app id="inspire">
            <v-navigation-drawer fixed :clipped="$vuetify.breakpoint.mdAndUp" app v-model="drawer" class=drawer>
                <v-list dense>
                    <v-avatar size="80px" class="avatarimage">
                        <img src="/media/{{user.userprofile.img_src}}">
                    </v-avatar>
                    <v-spacer class="username" v-model="name">
                        [[name]]
                    </v-spacer>
                    <v-spacer class="supportdetails" v-model="details">
                        [[details]]
                    </v-spacer>
                    <v-subheader>MY CHANNELS</v-subheader>
                    {% for channel in my_channels %}
                    <v-list-tile :key="{{channelUser.channel.title}}" ripple @click="">
                        <v-list-tile-avatar size="30px">
                            <img src="/media/{{channel.img_src}}">
                        </v-list-tile-avatar>
                        <v-list-tile-content>
                            <v-list-tile-title class="mychanneltitle">
                                {{channel.title}}
                            </v-list-tile-title>
                        </v-list-tile-content>
                    </v-list-tile>
                    {% endfor %}
                </v-list>
            </v-navigation-drawer>
            <v-toolbar color="blue darken-3" dark app :clipped-left="$vuetify.breakpoint.mdAndUp" fixed>
                <v-toolbar-title style="width: 300px" class="ml-0 pl-3">
                    <v-toolbar-side-icon @click.stop="drawer = !drawer"></v-toolbar-side-icon>
                    <span class="hidden-sm-and-down">MinuteTalk</span>
                </v-toolbar-title>
                <v-spacer></v-spacer>
                <v-btn icon>
                    <v-icon>notifications</v-icon>
                </v-btn>
                <v-menu v-model=menupopout :close-on-content-click="false" :nudge-width="50" offset-y>
                    <v-btn icon slot="activator">
                        <v-avatar size="32px">
                            <img src="/media/{{user.userprofile.img_src}}" alt="Avatar">
                        </v-avatar>
                    </v-btn>
                    <v-card class=usericonright>
                        <v-list>
                            <v-list-tile avatar>
                                <v-list-tile-avatar>
                                    <img src="/media/{{user.userprofile.img_src}}">
                                </v-list-tile-avatar>
                                <v-list-tile-content>
                                    <v-list-tile-title v-model="name">[[name]]</v-list-tile-title>
                                    <v-list-tile-sub-title v-model="details">[[details]]</v-list-tile-sub-title>
                                </v-list-tile-content>
                                </v-list-tile-action>
                            </v-list-tile>
                        </v-list>
                        <v-divider></v-divider>
                        <v-spacer></v-spacer>
                        <v-list class="v-list iconlist">
                            <v-list-tile v-for="(item, index) in iconlist" :key="index" ripple @click="dropdown(item.title)">
                                <v-list-tile-action>
                                    <v-icon>[[item.icon]]</v-icon>
                                </v-list-tile-action>
                                <v-list-tile-title>[[item.title]]</v-list-tile-title>
                            </v-list-tile>
                        </v-list>
                    </v-card>
                </v-menu>
            </v-toolbar>
            <v-dialog transition="scale-transition" v-model="editprofile" no-click-animation persistent width="500px" height="1000px">
                <v-layout>
                    <v-flex>
                        <v-card class="elevation-12">
                            <v-toolbar dark color="primary">
                                <v-btn color="transparent" icon @click.prevent="reset">
                                    <v-icon>close</v-icon>
                                </v-btn>
                                <v-toolbar-title>EDIT PROFILE</v-toolbar-title>
                                <v-spacer></v-spacer>
                                <v-btn color="transparent" icon :disabled="isEditing" @click.prevent="isEditing = !isEditing">
                                    <v-icon>edit</v-icon>
                                </v-btn>
                            </v-toolbar>
                            <v-card-text>
                                <form ref="editForm">
                                    {% csrf_token %}
                                    <v-text-field color="pink accent-4" v-model="form.fname" prepend-icon="person" name="first_name" label="First Name" :rules="firstnameRules" :disabled="!isEditing" type="text" ></v-text-field>
                                    <v-text-field color="pink accent-4" v-model="form.lname" prepend-icon="person" name="last_name" label="Last Name" :rules="lastnameRules" :disabled="!isEditing" type="text"></v-text-field>
                                    <v-text-field color="pink accent-4" v-model="form.email" prepend-icon="mail" name="email" label="Email" :rules="emailRules" :disabled="true" type="text"></v-text-field>
                                    <v-text-field color="pink accent-4" v-model="form.username" prepend-icon="person" name="username" label="Username" :rules="usernameRules" :disabled="true" type="text"></v-text-field>
                                    <v-text-field color="pink accent-4" v-model="form.password" prepend-icon="lock" name="password1" label="Password" id="password" :rules="passwordRules" type="password" :disabled="!isEditing"></v-text-field>
                                    <v-text-field color="pink accent-4" v-model="form.cpassword" prepend-icon="lock" name="password2" label="Confirm Password" id="cpassword" :rules="confirmRules" type="password" :disabled="!isEditing"></v-text-field>
                                    <v-text-field color="pink accent-4" v-model="form.age" prepend-icon="person" name="age" label="Age" id="age" :rules="ageRules" :disabled="!isEditing" type="text"></v-text-field>
                                    <v-autocomplete color="pink accent-4" prepend-icon="person" name="gender" :items="['Male', 'Female']" v-model="form.gender" label="Gender" :disabled="!isEditing"></v-autocomplete>
                                </form>
                            </v-card-text>
                            <v-card-actions>
                                <v-spacer></v-spacer>
                                <v-btn round flat @click.native="isEditing=editprofile=false" :disabled="validate" @click.prevent="edit">Save</v-btn>
                            </v-card-actions>
                        </v-card>
                    </v-flex>
                </v-layout>
                </v-content>
            </v-dialog>
            {% block content %} {% endblock %}
        </v-app>
    </div>
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/vuetify/dist/vuetify.js"></script>
    <script src="https://static.opentok.com/v2/js/opentok.min.js"></script>
    <script type="text/javascript" src="{% static 'minutetalk/js/home.js' %}"></script>
    <script type="text/javascript">
        let fname1 = "{{user.first_name}}";
        var lname1 = "{{user.last_name}}";
        var email1 = "{{user.email}}";
        var username1 = "{{user.username}}";
        var age1 = "{{user.userprofile.age}}";
        var gender1 = "{{user.userprofile.gender}}";
        function init(){
            vue.form.fname =  fname1;
            vue.form.lname = lname1;
            vue.form.email = email1;
            vue.form.username = username1;
            vue.form.age  = age1;
            vue.form.gender = gender1;
            vue.name = fname1 + " " + lname1;
            vue.details = gender1 + ", " +  age1;
            

        }
        init();
    </script>
</body>

</html>